import heapq

A = 5
B = [[1, 2],
     [2, 3],
     [4, 3],
     [4, 5]]
# A = 5
# B = [[1, 2],
#      [2, 3],
#      [3, 4],
#      [4, 5]]
# A = 7
# B = [
#   [1, 2],
#   [3, 2],
#   [3, 4],
#   [7, 4],
#   [6, 2],
#   [5, 6],
#   [7, 5]
# ]
# A = 6
# B = [
#   [1, 2],
#   [2, 3],
#   [3, 4],
#   [4, 1],
#   [2, 3],
#   [4, 2],
#   [3, 4],
#   [5, 5],
#   [5, 5]
# ]
# A = 1000
# B = [
#   [775, 775],
#   [140, 140],
#   [884, 140],
#   [199, 199],
#   [573, 140],
#   [683, 140],
#   [256, 256],
#   [750, 573],
#   [9, 199],
#   [605, 256],
#   [276, 775],
#   [623, 199],
#   [195, 199],
#   [115, 140],
#   [294, 195],
#   [377, 140],
#   [17, 573],
#   [945, 775],
#   [19, 750],
#   [708, 294],
#   [202, 276],
#   [617, 377],
#   [110, 945],
#   [494, 17],
#   [246, 202],
#   [26, 884],
#   [992, 256],
#   [460, 617],
#   [381, 683],
#   [550, 617],
#   [97, 199],
#   [32, 202],
#   [584, 17],
#   [644, 377],
#   [787, 584],
#   [595, 110],
#   [37, 573],
#   [628, 110],
#   [467, 140],
#   [923, 467],
#   [425, 140],
#   [314, 140],
#   [43, 26],
#   [169, 381],
#   [447, 294],
#   [503, 644],
#   [214, 97],
#   [305, 17],
#   [966, 605],
#   [752, 787],
#   [141, 605],
#   [403, 199],
#   [507, 884],
#   [386, 169],
#   [55, 573],
#   [1, 43],
#   [387, 32],
#   [223, 195],
#   [443, 387],
#   [51, 460],
#   [80, 51],
#   [713, 923],
#   [563, 141],
#   [198, 305],
#   [511, 884],
#   [154, 141],
#   [41, 140],
#   [445, 41],
#   [220, 220],
#   [68, 775],
#   [327, 403],
#   [952, 563],
#   [970, 644],
#   [265, 195],
#   [121, 199],
#   [76, 294],
#   [77, 460],
#   [257, 32],
#   [178, 115],
#   [46, 750],
#   [230, 46],
#   [82, 494],
#   [576, 199],
#   [545, 752],
#   [38, 41],
#   [841, 595],
#   [324, 41],
#   [857, 169],
#   [610, 327],
#   [551, 992],
#   [808, 68],
#   [699, 386],
#   [72, 750],
#   [604, 545],
#   [42, 545],
#   [96, 511],
#   [882, 178],
#   [157, 140],
#   [173, 257],
#   [774, 38],
#   [630, 683],
#   [34, 507],
#   [12, 42],
#   [104, 774],
#   [725, 494],
#   [3, 169],
#   [215, 294],
#   [108, 256],
#   [109, 246],
#   [67, 447],
#   [899, 945],
#   [615, 202],
#   [608, 246],
#   [262, 46],
#   [694, 623],
#   [802, 96],
#   [197, 445],
#   [323, 608],
#   [85, 923],
#   [768, 377],
#   [106, 952],
#   [62, 42],
#   [697, 630],
#   [978, 324],
#   [533, 141],
#   [126, 327],
#   [665, 623],
#   [963, 628],
#   [658, 19],
#   [130, 197],
#   [601, 68],
#   [86, 327],
#   [339, 658],
#   [887, 265],
#   [626, 386],
#   [634, 9],
#   [137, 443],
#   [138, 634],
#   [139, 752],
#   [689, 882],
#   [418, 511],
#   [308, 199],
#   [143, 85],
#   [657, 617],
#   [672, 644],
#   [659, 276],
#   [690, 657],
#   [23, 787],
#   [149, 126],
#   [392, 110],
#   [295, 3],
#   [152, 725],
#   [493, 339],
#   [274, 199],
#   [967, 617],
#   [250, 418],
#   [587, 140],
#   [877, 595],
#   [180, 68],
#   [636, 841],
#   [687, 658],
#   [243, 295],
#   [547, 67],
#   [229, 256],
#   [954, 9],
#   [577, 37],
#   [417, 417],
#   [444, 605],
#   [70, 85],
#   [458, 9],
#   [233, 573],
#   [977, 32],
#   [567, 96],
#   [117, 551],
#   [175, 339],
#   [742, 467],
#   [727, 157],
#   [446, 601],
#   [871, 683],
#   [203, 41],
#   [235, 17],
#   [98, 615],
#   [566, 551],
#   [87, 109],
#   [865, 503],
#   [506, 67],
#   [359, 672],
#   [885, 617],
#   [471, 246],
#   [412, 787],
#   [876, 257],
#   [922, 154],
#   [190, 96],
#   [367, 87],
#   [48, 314],
#   [306, 62],
#   [903, 274],
#   [10, 37],
#   [961, 306],
#   [112, 203],
#   [609, 235],
#   [5, 257],
#   [707, 143],
#   [731, 262],
#   [868, 294],
#   [351, 109],
#   [297, 115],
#   [208, 140],
#   [570, 43],
#   [289, 214],
#   [858, 690],
#   [779, 494],
#   [316, 197],
#   [432, 903],
#   [766, 617],
#   [620, 417],
#   [338, 274],
#   [344, 202],
#   [31, 256],
#   [784, 97],
#   [825, 10],
#   [405, 672],
#   [986, 26],
#   [25, 32],
#   [247, 587],
#   [745, 154],
#   [142, 493],
#   [53, 871],
#   [696, 42],
#   [688, 85],
#   [238, 825],
#   [554, 775],
#   [353, 392],
#   [334, 110],
#   [382, 220],
#   [761, 316],
#   [715, 923],
#   [27, 626],
#   [92, 727],
#   [993, 235],
#   [839, 203],
#   [171, 121],
#   [656, 882],
#   [342, 195],
#   [786, 503],
#   [272, 377],
#   [184, 12],
#   [416, 699],
#   [433, 416],
#   [594, 142],
#   [829, 403],
#   [641, 417],
#   [391, 377],
#   [895, 86],
#   [236, 745],
#   [640, 858],
#   [934, 48],
#   [676, 923],
#   [228, 699],
#   [568, 32],
#   [315, 903],
#   [862, 46],
#   [646, 126],
#   [153, 952],
#   [74, 961],
#   [266, 198],
#   [267, 750],
#   [880, 223],
#   [269, 587],
#   [15, 829],
#   [404, 272],
#   [528, 267],
#   [818, 715],
#   [674, 272],
#   [258, 689],
#   [737, 445],
#   [709, 952],
#   [890, 55],
#   [581, 445],
#   [370, 432],
#   [844, 506],
#   [804, 137],
#   [939, 43],
#   [654, 690],
#   [285, 676],
#   [606, 173],
#   [575, 121],
#   [504, 97],
#   [210, 715],
#   [79, 405],
#   [820, 934],
#   [322, 766],
#   [277, 784],
#   [928, 954],
#   [624, 199],
#   [919, 79],
#   [524, 628],
#   [578, 507],
#   [489, 581],
#   [280, 391],
#   [633, 605],
#   [396, 169],
#   [303, 173],
#   [304, 993],
#   [556, 377],
#   [956, 202],
#   [307, 725],
#   [349, 92],
#   [733, 676],
#   [893, 923],
#   [330, 961],
#   [499, 31],
#   [158, 70],
#   [543, 595],
#   [99, 844],
#   [929, 494],
#   [869, 573],
#   [413, 731],
#   [931, 171],
#   [838, 370],
#   [468, 633],
#   [454, 954],
#   [803, 72],
#   [28, 77],
#   [476, 737],
#   [331, 966],
#   [914, 243],
#   [942, 709],
#   [602, 280],
#   [714, 25],
#   [799, 351],
#   [635, 72],
#   [498, 184],
#   [352, 446],
#   [875, 413],
#   [790, 818],
#   [734, 779],
#   [161, 615],
#   [451, 808],
#   [340, 551],
#   [360, 624],
#   [912, 568],
#   [530, 774],
#   [193, 178],
#   [380, 158],
#   [975, 568],
#   [431, 727],
#   [677, 858],
#   [275, 903],
#   [186, 68],
#   [206, 615],
#   [188, 871],
#   [722, 992],
#   [29, 841],
#   [355, 476],
#   [719, 37],
#   [851, 709],
#   [870, 92],
#   [976, 790],
#   [933, 359],
#   [704, 297],
#   [362, 875],
#   [122, 339],
#   [364, 545],
#   [335, 745],
#   [400, 524],
#   [763, 99],
#   [227, 137],
#   [52, 626],
#   [951, 223],
#   [798, 858],
#   [937, 258],
#   [373, 418],
#   [345, 451],
#   [501, 709],
#   [376, 364],
#   [906, 257],
#   [653, 869],
#   [969, 55],
#   [374, 330],
#   [176, 32],
#   [821, 386],
#   [565, 857],
#   [546, 697],
#   [717, 653],
#   [240, 9],
#   [57, 184],
#   [388, 72],
#   [814, 303],
#   [298, 10],
#   [705, 178],
#   [743, 215],
#   [435, 471],
#   [167, 750],
#   [261, 734],
#   [95, 208],
#   [111, 193],
#   [341, 95],
#   [907, 565],
#   [168, 28],
#   [957, 446],
#   [402, 203],
#   [753, 857],
#   [472, 106],
#   [711, 210],
#   [244, 672],
#   [107, 280],
#   [408, 227],
#   [827, 742],
#   [706, 223],
#   [329, 269],
#   [655, 467],
#   [436, 376],
#   [900, 581],
#   [846, 227],
#   [834, 374],
#   [318, 267],
#   [201, 444],
#   [995, 775],
#   [369, 12],
#   [670, 584],
#   [816, 875],
#   [423, 34],
#   [611, 887],
#   [500, 922],
#   [701, 417],
#   [395, 489],
#   [284, 367],
#   [372, 294],
#   [146, 708],
#   [629, 96],
#   [407, 351],
#   [89, 46],
#   [434, 32],
#   [516, 352],
#   [795, 566],
#   [44, 694],
#   [177, 570],
#   [394, 188],
#   [429, 503],
#   [393, 266],
#   [170, 388],
#   [319, 276],
#   [830, 367],
#   [461, 304],
#   [292, 227],
#   [200, 677],
#   [792, 601],
#   [102, 611],
#   [450, 246],
#   [536, 931],
#   [131, 568],
#   [638, 565],
#   [660, 277],
#   [695, 714],
#   [456, 367],
#   [521, 688],
#   [681, 611],
#   [459, 223],
#   [481, 339],
#   [650, 536],
#   [668, 345],
#   [622, 340],
#   [118, 719],
#   [998, 335],
#   [894, 545],
#   [309, 709],
#   [625, 289],
#   [589, 176],
#   [879, 978],
#   [163, 210],
#   [224, 808],
#   [811, 388],
#   [333, 882],
#   [878, 665],
#   [813, 998],
#   [273, 610],
#   [505, 761],
#   [703, 391],
#   [20, 359],
#   [205, 5],
#   [45, 784],
#   [185, 568],
#   [484, 198],
#   [796, 467],
#   [135, 919],
#   [474, 533],
#   [488, 344],
#   [470, 784],
#   [182, 443],
#   [491, 451],
#   [356, 258],
#   [645, 887],
#   [24, 615],
#   [723, 224],
#   [469, 672],
#   [497, 396],
#   [487, 140],
#   [312, 533],
#   [245, 285],
#   [59, 373],
#   [836, 871],
#   [181, 240],
#   [264, 725],
#   [780, 695],
#   [301, 404],
#   [712, 377],
#   [548, 554],
#   [883, 604],
#   [974, 877],
#   [427, 933],
#   [726, 505],
#   [721, 753],
#   [278, 316],
#   [60, 939],
#   [973, 907],
#   [517, 635],
#   [518, 235],
#   [519, 48],
#   [981, 454],
#   [773, 331],
#   [513, 137],
#   [740, 220],
#   [463, 836],
#   [222, 546],
#   [326, 195],
#   [288, 264],
#   [302, 608],
#   [529, 309],
#   [78, 10],
#   [129, 511],
#   [525, 334],
#   [437, 314],
#   [639, 878],
#   [482, 601],
#   [69, 308],
#   [679, 197],
#   [502, 688],
#   [343, 236],
#   [540, 98],
#   [291, 726],
#   [66, 433],
#   [496, 222],
#   [379, 351],
#   [187, 595],
#   [958, 240],
#   [538, 51],
#   [192, 792],
#   [61, 250],
#   [607, 52],
#   [667, 737],
#   [532, 563],
#   [415, 342],
#   [232, 227],
#   [759, 834],
#   [662, 969],
#   [965, 403],
#   [754, 803],
#   [531, 970],
#   [560, 52],
#   [698, 20],
#   [692, 197],
#   [426, 533],
#   [123, 690],
#   [835, 646],
#   [213, 796],
#   [350, 695],
#   [845, 683],
#   [539, 498],
#   [671, 55],
#   [571, 638],
#   [716, 954],
#   [860, 967],
#   [156, 193],
#   [800, 431],
#   [826, 130],
#   [255, 188],
#   [56, 565],
#   [526, 220],
#   [455, 525],
#   [962, 601],
#   [994, 970],
#   [252, 871],
#   [165, 455],
#   [797, 185],
#   [586, 709],
#   [279, 202],
#   [164, 701],
#   [231, 5],
#   [580, 163],
#   [591, 795],
#   [196, 382],
#   [486, 617],
#   [101, 51],
#   [397, 750],
#   [861, 393],
#   [597, 722],
#   [440, 504],
#   [90, 706],
#   [600, 185],
#   [812, 775],
#   [422, 505],
#   [218, 895],
#   [94, 482],
#   [982, 98],
#   [189, 25],
#   [124, 829],
#   [831, 530],
#   [588, 638],
#   [555, 981],
#   [234, 698],
#   [128, 482],
#   [789, 488],
#   [904, 220],
#   [648, 43],
#   [616, 630],
#   [22, 137],
#   [618, 551],
#   [619, 12],
#   [58, 432],
#   [643, 135],
#   [983, 319],
#   [510, 961],
#   [843, 550],
#   [88, 85],
#   [337, 474],
#   [984, 284],
#   [520, 376],
#   [347, 740],
#   [874, 404],
#   [311, 998],
#   [81, 397],
#   [242, 742],
#   [985, 929],
#   [21, 648],
#   [160, 486],
#   [150, 355],
#   [971, 742],
#   [651, 331],
#   [49, 387],
#   [873, 284],
#   [896, 958],
#   [866, 790],
#   [848, 588],
#   [599, 276],
#   [84, 578],
#   [948, 656],
#   [2, 146],
#   [649, 360],
#   [384, 973],
#   [260, 200],
#   [282, 81],
#   [290, 280],
#   [852, 616],
#   [664, 153],
#   [669, 307],
#   [921, 962],
#   [4, 276],
#   [8, 338],
#   [564, 416],
#   [661, 533],
#   [13, 609],
#   [663, 342],
#   [430, 242],
#   [457, 610],
#   [666, 581],
#   [522, 981],
#   [462, 566],
#   [241, 841],
#   [249, 808],
#   [702, 995],
#   [915, 59],
#   [805, 894],
#   [162, 434],
#   [439, 869],
#   [964, 101],
#   [216, 555],
#   [898, 861],
#   [854, 156],
#   [647, 977],
#   [390, 451],
#   [682, 110],
#   [452, 324],
#   [39, 476],
#   [263, 1],
#   [116, 597],
#   [83, 51],
#   [209, 1],
#   [837, 692],
#   [179, 517],
#   [691, 573],
#   [583, 305],
#   [144, 745],
#   [891, 416],
#   [54, 586],
#   [421, 818],
#   [253, 262],
#   [464, 240],
#   [64, 96],
#   [103, 112],
#   [30, 84],
#   [389, 681],
#   [910, 240],
#   [361, 392],
#   [980, 659],
#   [614, 919],
#   [332, 253],
#   [987, 587],
#   [145, 658],
#   [710, 4],
#   [938, 316],
#   [972, 130],
#   [901, 792],
#   [105, 422],
#   [237, 722],
#   [313, 580],
#   [71, 180],
#   [147, 860],
#   [65, 681],
#   [720, 952],
#   [621, 244],
#   [527, 77],
#   [495, 548],
#   [300, 606],
#   [996, 341],
#   [930, 394],
#   [134, 679],
#   [728, 1],
#   [378, 985],
#   [730, 970],
#   [204, 48],
#   [755, 17],
#   [310, 432],
#   [783, 962],
#   [652, 86],
#   [603, 933],
#   [593, 614],
#   [358, 57],
#   [191, 601],
#   [685, 276],
#   [947, 820],
#   [6, 602],
#   [678, 88],
#   [744, 360],
#   [991, 614],
#   [746, 885],
#   [747, 360],
#   [748, 994],
#   [749, 13],
#   [465, 476],
#   [174, 834],
#   [562, 65],
#   [159, 173],
#   [953, 429],
#   [558, 338],
#   [756, 23],
#   [819, 330],
#   [225, 641],
#   [642, 276],
#   [420, 378],
#   [585, 495],
#   [475, 834],
#   [909, 931],
#   [997, 676],
#   [357, 102],
#   [132, 382],
#   [410, 819],
#   [271, 350],
#   [718, 663],
#   [375, 663],
#   [801, 467],
#   [772, 826],
#   [515, 808],
#   [113, 223],
#   [850, 973],
#   [776, 702],
#   [777, 681],
#   [778, 835],
#   [166, 400],
#   [151, 198],
#   [781, 205],
#   [782, 224],
#   [207, 213],
#   [283, 390],
#   [541, 470],
#   [693, 123],
#   [817, 32],
#   [788, 326],
#   [542, 265],
#   [398, 15],
#   [686, 507],
#   [448, 942],
#   [793, 484],
#   [47, 255],
#   [569, 285],
#   [485, 141],
#   [385, 311],
#   [317, 628],
#   [700, 577],
#   [93, 118],
#   [771, 279],
#   [724, 505],
#   [856, 468],
#   [63, 53],
#   [598, 364],
#   [806, 788],
#   [769, 455],
#   [91, 156],
#   [926, 78],
#   [810, 378],
#   [473, 96],
#   [738, 766],
#   [849, 884],
#   [346, 670],
#   [815, 391],
#   [293, 817],
#   [100, 334],
#   [739, 728],
#   [764, 510],
#   [325, 24],
#   [917, 894],
#   [822, 387],
#   [823, 340],
#   [336, 739],
#   [221, 92],
#   [582, 340],
#   [512, 45],
#   [828, 641],
#   [119, 104],
#   [549, 754],
#   [684, 150],
#   [251, 895],
#   [833, 715],
#   [767, 391],
#   [944, 41],
#   [296, 862],
#   [441, 643],
#   [320, 657],
#   [807, 777],
#   [840, 111],
#   [368, 503],
#   [50, 153],
#   [824, 616],
#   [968, 282],
#   [889, 112],
#   [612, 441],
#   [847, 51],
#   [211, 165],
#   [286, 790],
#   [449, 346],
#   [579, 78],
#   [194, 402],
#   [853, 710],
#   [785, 396],
#   [855, 471],
#   [572, 582],
#   [736, 621],
#   [125, 501],
#   [859, 343],
#   [492, 885],
#   [596, 487],
#   [321, 4],
#   [863, 633],
#   [553, 447],
#   [935, 131],
#   [537, 755],
#   [867, 392],
#   [760, 766],
#   [544, 986],
#   [480, 141],
#   [219, 572],
#   [872, 970],
#   [791, 358],
#   [328, 345],
#   [401, 588],
#   [561, 214],
#   [133, 330],
#   [1000, 565],
#   [631, 22],
#   [979, 542],
#   [881, 720],
#   [535, 378],
#   [509, 653],
#   [924, 501],
#   [414, 50],
#   [226, 374],
#   [442, 516],
#   [888, 828],
#   [120, 874],
#   [514, 919],
#   [592, 242],
#   [892, 672],
#   [729, 948],
#   [466, 434],
#   [406, 343],
#   [287, 521],
#   [897, 743],
#   [490, 103],
#   [73, 385],
#   [16, 769],
#   [363, 695],
#   [770, 88],
#   [348, 813],
#   [832, 719],
#   [905, 997],
#   [959, 310],
#   [399, 44],
#   [675, 489],
#   [627, 26],
#   [479, 500],
#   [911, 555],
#   [35, 300],
#   [913, 521],
#   [14, 507],
#   [366, 545],
#   [916, 722],
#   [36, 131],
#   [918, 972],
#   [217, 897],
#   [920, 548],
#   [281, 550],
#   [183, 120],
#   [33, 277],
#   [559, 123],
#   [925, 677],
#   [908, 730],
#   [758, 698],
#   [613, 986],
#   [765, 52],
#   [842, 529],
#   [248, 335],
#   [574, 262],
#   [508, 80],
#   [419, 619],
#   [757, 302],
#   [936, 53],
#   [955, 548],
#   [557, 882],
#   [40, 95],
#   [940, 730],
#   [809, 526],
#   [11, 708],
#   [943, 810],
#   [424, 579],
#   [18, 432],
#   [946, 774],
#   [212, 462],
#   [732, 250],
#   [949, 357],
#   [950, 627],
#   [478, 93],
#   [75, 83],
#   [483, 349],
#   [409, 595],
#   [989, 717],
#   [864, 708],
#   [299, 830],
#   [136, 763],
#   [794, 352],
#   [960, 653],
#   [751, 178],
#   [371, 965],
#   [632, 322],
#   [411, 51],
#   [523, 446],
#   [365, 846],
#   [155, 177],
#   [932, 997],
#   [7, 266],
#   [762, 527],
#   [453, 772],
#   [114, 126],
#   [886, 675],
#   [680, 87],
#   [673, 885],
#   [268, 650],
#   [172, 154],
#   [902, 612],
#   [239, 447],
#   [999, 563],
#   [354, 836],
#   [148, 79],
#   [534, 218],
#   [941, 124],
#   [477, 182],
#   [637, 884],
#   [735, 842],
#   [988, 528],
#   [927, 481],
#   [990, 900],
#   [127, 931],
#   [590, 757],
#   [270, 477],
#   [552, 919],
#   [383, 926],
#   [428, 979],
#   [741, 414],
#   [438, 379],
#   [259, 279],
#   [254, 704]
# ]
adj = {c: [] for c in range(A + 1)}

valmap = {}
for src, des in B:
    valmap.__setitem__((src, des), 0)

distance = [[] for i in range(A + 1)]
# print(distance)

for src, des in B:
    adj[src].append(des)
    adj[des].append(src)
    if (des,src) not in valmap:
        valmap.__setitem__((des, src), 1)

# print(adj)
# print(valmap)

visit = set()
q = []
heapq.heapify(q)
heapq.heappush(q,(0,1))

while q:
    wt,trg = heapq.heappop(q)
    if distance[trg] == []:
        distance[trg] = wt
    if trg not in visit:
        for val in adj[trg]:
            weight = wt + valmap[(trg,val)]
            heapq.heappush(q,(weight,val))
            # print(wt,weight,trg,val,visit,q)
        visit.add(trg)


if distance[-1] == []:
    print(-1)
else:
    print(distance[-1])

